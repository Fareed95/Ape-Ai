# üéØ Interview API Documentation

This document explains the **Interview API** and **Authentication
utility** used in the project.\
It is designed so that frontend developers can directly understand **how
to call APIs, what to send, and what to expect in response**.

------------------------------------------------------------------------

## üîë Authentication Flow

### Headers Required

Every request to the API **must** include the following headers:

``` http
Authorization: <JWT_TOKEN>
x-auth-app: <FRONTEND_SECRET>
```

-   `Authorization`: JWT token generated when user logs in.
-   `x-auth-app`: A secret key shared between frontend and backend (must
    match `.env` ‚Üí `FRONTEND_SECRET`).

### How Authentication Works

-   The token is decoded with **HS256** algorithm.
-   If token is expired or invalid ‚Üí `401 Unauthenticated` error.
-   If `x-auth-app` secret key doesn't match ‚Üí `401 Invalid secret key`
    error.

‚úÖ Once validated, `authenticate_request()` will return the logged-in
user object.

------------------------------------------------------------------------

## üóÇÔ∏è API: InterviewList

**Endpoint:**

``` http
POST /api/interviews/
```

This single endpoint handles **two modes**:
1. **Demo Interview Flow** (for practice sessions)\
2. **Real Internship Interview Flow** (for actual internship
applications)

------------------------------------------------------------------------

### 1Ô∏è‚É£ Demo Interview Flow

**Request (Initialization):**

``` json
{
  "demo_interview": true,
  "Topic": "Frontend Developer"
}
```

‚û°Ô∏è This starts a new demo interview with sample company & internship
data.

**Response (Initialization):**

``` json
{
  "question": "First demo question generated by AI",
  "question_id": 5,
  "end": false
}
```

**Request (Answering):**

``` json
{
  "demo_interview": true,
  "question_id": 5,
  "answer": "I have knowledge of React and Tailwind CSS."
}
```

**Response (Next Question or End):**

``` json
{
  "question": "Next question generated by AI",
  "question_id": 6,
  "end": false
}
```

‚û°Ô∏è After 5 questions, the session ends with analysis:

``` json
{
  "question": "So John, this was a demo session. Hope you enjoyed it!",
  "end": true
}
```

------------------------------------------------------------------------

### 2Ô∏è‚É£ Real Internship Interview Flow

**Request (Initialization):**

``` json
{
  "internship_id": 3
}
```

‚û°Ô∏è This starts an actual internship interview.

**Response (Initialization):**

``` json
{
  "question": "Tell me about yourself and why you are interested in this role?",
  "question_id": 12,
  "end": false
}
```

**Request (Answering):**

``` json
{
  "internship_id":3,
  "question_id": 12,
  "answer": "I am a Computer Science student skilled in Django and REST APIs."
}
```

**Response (Next Question):**

``` json
{
  "question": "Can you explain your experience with databases and APIs?",
  "question_id": 13,
  "end": false
}
```

‚û°Ô∏è After 5 questions, the interview ends:

``` json
{
  "question": "So John, it was a great time with you. You will be updated via email soon.",
  "end": true
}
```

------------------------------------------------------------------------

### üîí Special Rule: Prevent Duplicate Interviews

If an **interviewer has already conducted an interview for a given
internship**, then API directly responds with:

``` json
{
  "message": "This interviewer has already conducted an interview for this internship.",
  "end": true
}
```

------------------------------------------------------------------------

## ‚ö†Ô∏è Error Responses

-   `400 Bad Request` ‚Üí Missing parameters (`demo_topic`,
    `internship_id`, etc.)\
-   `401 Unauthorized` ‚Üí Invalid or missing authentication headers\
-   `404 Not Found` ‚Üí Invalid internship ID

------------------------------------------------------------------------

## ‚úÖ Summary

-   Use `demo_interview: true` ‚Üí for **practice mock interviews**.
-   Use `internship_id` ‚Üí for **real
    internship interviews**.
-   Each response contains:
    -   `question`: AI-generated question or ending message\
    -   `question_id`: To be used for answering\
    -   `end`: Boolean ‚Üí tells whether interview is over

------------------------------------------------------------------------

üöÄ With this documentation, frontend developers can easily integrate the
API into interview flows.

### For any querries reach out to the developer

- Fareed Sayed
- +91 9987580370
- fareedsayed95@gmail.com 